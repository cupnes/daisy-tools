# daisy-tools
## 概要
バイナリを生物として扱うことで、進化的にバイナリを生成するシステムです。

詳しくは以下の同人誌『バイナリ生成環境「daisy-tools」実験報告』をご覧ください。こちらで、コンセプトとアーキテクチャ、使い方、daisy-toolsを用いた実験とその結果を紹介しています。

なお、daisy-toolsは作者独自の「バイナリ生物学」という考え方と基本設計に基づいて作られています。これについては同人誌「バイナリ生物学入門」で紹介していますので、こちらも良ければご覧ください。

作者の同人誌や制作物は以下のウェブサイトにまとめていますので、もし興味があればこちらからどうぞ。

 * http://yuma.ohgami.jp/

## 環境構築
ビルド環境・実行環境を説明します。なお、いずれもUnix/Linux環境を想定しています。ディストリビューションに依らない想定ですが、参考として、作者はDebianで開発しています。

### ビルド環境
daisy-toolsをビルドするために必要なソフトウェアは以下の通りです。

 * make
 * gcc

Debian系ディストリビューションであれば`build-essential`というパッケージにこれらが含まれていますので、これをインストールしておけばOKです。

```sh
$ sudo apt install build-essential
```

### 実行環境
実行する際に必要なソフトウェア/ライブラリは以下の通りです。

 * GNU Cライブラリ(libc)
 * bash
 * jq

Debian系のディストリビューションであれば、以下のようなパッケージ指定でインストール可能です。

```sh
$ sudo apt install libc6 bash jq
```

なお、実行に必須というわけではありませんが、詳細なログは`syslog`に出力していますので、実行時の詳細なログを見たい場合は`syslog`が使用できる環境が良いです。ただ、おおよその実行ログは標準出力/標準エラー出力へ出力していますし、「詳細なログが見れない」というだけなので、`syslog`が使えない環境でも実行自体に問題はありません。

## 使い方
詳しくは前述の同人誌の通りですが、ここに簡単に使い方をまとめておきます。

### セットアップ
このディレクトリ直下で以下を実行すると、実行したユーザーのホームディレクトリ直下に`dsy-work`というディレクトリを作成し、そこへ`daisy-tools`の実行に必要なディレクトリ構造とプログラム/スクリプトを配置します。

```sh
$ make setup
```

なお、ここで生成される`dsy-work`ディレクトリをZIPアーカイブにしたものが、[リリースページ](https://github.com/cupnes/daisy-tools/releases)で公開している`dsy-work_YYYYMMDD.zip`です。

### 初期設定
`daisy-tools`を実行するに際し、初期設定として「細胞ファイル」・「コード化合物ファイル」という独自のファイルを`cell`・`code`ディレクトリへ配置しておく必要があります。

また、実行時に自動生成されるファイルの名前付けに使われる`dsy-name`と、`code`ディレクトリに生成された細胞ファイルの評価に使われる`dsy-eval`も、実験内容や好みに応じて作成し`bin`ディレクトリへ配置しておく必要があります。

これらに関しては、サンプルが`samples`ディレクトリにあります。詳しくは同人誌『バイナリ生成環境「daisy-tools」実験報告』を参照してください。

### 開始
`daisy-tools`のシステムを開始するには、`dsy-work`ディレクトリ直下で以下を実行します。

```sh
$ bin/dsy-sysenv
```

なお、開始するとフォアグラウンドで実行し続けプロンプトは返ってこないので、screenやtmuxなどのターミナルマルチプレクサ上で実行してデタッチしておくとか、何らかの方法で放置しておけるようにするのがおすすめです。

適応度100の細胞ファイルが生まれると`daisy-tools`は自動的に停止し、その細胞ファイルを`dsy-work`ディレクトリ直下に`out.cell`という名前で保存します。この辺りについても詳しくは同人誌『バイナリ生成環境「daisy-tools」実験報告』を参照してください。

### 停止と再開
`daisy-tools`の実行中は`dsy-work`ディレクトリ直下に`running`という名前のファイルが生成されます。停止させる際はこのファイルを削除してください。(すると`daisy-tools`は動作を停止します。)

```sh
$ rm running
```

再開させる際は再度`dsy-sysenv`を実行すればOKです。

```sh
$ bin/dsy-sysenv
```

標準出力に`========== XX 周期目 ==========`と出力される周期カウンタの値だけは1から始まりますが、細胞や化合物の状態など、周期カウンタ以外はすべて停止した状態から引き継がれています。
